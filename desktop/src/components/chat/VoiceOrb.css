/* Button state (composer) */
.voiceOrbButton {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(0, 0, 0, 0.22);
  color: rgba(242, 243, 255, 0.9);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.18s ease;
  font-family: inherit;
}

.voiceOrbButton:hover {
  background: rgba(182, 124, 255, 0.18);
  border-color: rgba(182, 124, 255, 0.4);
  color: rgba(242, 243, 255, 1);
  transform: translateY(-1px);
}

.voiceOrbButton:active {
  transform: translateY(0);
}

.voiceOrbButton__icon {
  font-size: 16px;
  line-height: 1;
}

.voiceOrbButton__text {
  line-height: 1;
}

/* ===== Fullscreen orb overlay ===== */

:root {
  --aika-orb-bg0: #07060b;
  --aika-orb-bg1: #120a22;
  --aika-orb-violet: #b67cff;
  --aika-orb-pink: #ff63d3;
  --aika-orb-cyan: #4de0ff;
  --aika-orb-size: 140px;
}

.voiceOrbContainer {
  position: fixed;
  inset: 0;
  z-index: 80;
  display: grid;
  place-items: center;
  cursor: pointer;
  animation: voiceOrbFadeIn 0.25s ease;
  background:
    radial-gradient(900px 650px at 30% 15%, rgba(182, 124, 255, 0.22), transparent 58%),
    radial-gradient(700px 560px at 75% 25%, rgba(77, 224, 255, 0.16), transparent 60%),
    radial-gradient(900px 700px at 55% 90%, rgba(255, 99, 211, 0.1), transparent 62%),
    linear-gradient(180deg, var(--aika-orb-bg0), var(--aika-orb-bg1));
  backdrop-filter: blur(16px);
}

@keyframes voiceOrbFadeIn {
  from {
    opacity: 0;
    transform: scale(0.98);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.voiceOrbWrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
  user-select: none;
}

.voiceOrbStage {
  position: relative;
  width: calc(var(--aika-orb-size) + 74px);
  height: calc(var(--aika-orb-size) + 74px);
  display: grid;
  place-items: center;
  transform: translateZ(0);
}

.voiceOrbHalo {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  filter:
    drop-shadow(0 0 18px rgba(182, 124, 255, 0.28))
    drop-shadow(0 0 32px rgba(77, 224, 255, 0.18));
  -webkit-mask: radial-gradient(circle, #000 62%, transparent 66%);
  mask: radial-gradient(circle, #000 62%, transparent 66%);
}

.voiceOrbAura {
  position: absolute;
  inset: -42%;
  border-radius: 999px;
  filter: blur(34px);
  opacity: 0.4;
  background:
    radial-gradient(circle at 30% 30%, rgba(77, 224, 255, 0.55), transparent 60%),
    radial-gradient(circle at 70% 70%, rgba(182, 124, 255, 0.6), transparent 62%),
    radial-gradient(circle at 55% 25%, rgba(255, 99, 211, 0.4), transparent 64%);
  transform: scale(1);
  transition: opacity 0.2s ease, transform 0.2s ease;
  pointer-events: none;
}

.voiceOrbRipple {
  position: absolute;
  inset: 20%;
  border-radius: 999px;
  border: 1px solid rgba(182, 124, 255, 0);
  opacity: 0;
  transform: scale(0.94);
  pointer-events: none;
  animation: voiceOrbRipple 1s ease-out infinite;
}

@keyframes voiceOrbRipple {
  0% {
    opacity: 0;
    transform: scale(0.94);
  }
  18% {
    opacity: 0.55;
    border-color: rgba(182, 124, 255, 0.22);
  }
  100% {
    opacity: 0;
    transform: scale(1.2);
    border-color: rgba(77, 224, 255, 0);
  }
}

.voiceOrbOrb {
  width: var(--aika-orb-size);
  height: var(--aika-orb-size);
  border-radius: 999px;
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0.22) 14%, transparent 42%),
    radial-gradient(circle at 35% 35%, rgba(77, 224, 255, 0.3), transparent 58%),
    radial-gradient(circle at 70% 70%, rgba(182, 124, 255, 0.34), transparent 62%),
    radial-gradient(circle at 65% 28%, rgba(255, 99, 211, 0.18), transparent 62%),
    radial-gradient(circle at 50% 65%, rgba(17, 10, 32, 0.78), rgba(7, 6, 12, 0.92) 58%, rgba(7, 6, 12, 0.96) 100%);
  box-shadow:
    0 30px 80px rgba(0, 0, 0, 0.55),
    0 0 0 1px rgba(255, 255, 255, 0.14) inset,
    0 -18px 40px rgba(77, 224, 255, 0.08) inset,
    0 18px 45px rgba(182, 124, 255, 0.1) inset;
  will-change: transform, filter;
  animation: voiceOrbTalk 0.34s ease-in-out infinite;
}

.voiceOrbCore {
  position: absolute;
  inset: 16%;
  border-radius: 999px;
  background:
    conic-gradient(
      from 180deg,
      rgba(77, 224, 255, 0),
      rgba(77, 224, 255, 0.55),
      rgba(182, 124, 255, 0.62),
      rgba(255, 99, 211, 0.42),
      rgba(77, 224, 255, 0)
    );
  filter: blur(11px);
  opacity: 0.9;
  mix-blend-mode: screen;
  animation: voiceOrbCoreSpin 2.6s linear infinite;
}

@keyframes voiceOrbCoreSpin {
  to {
    transform: rotate(360deg);
  }
}

.voiceOrbRefract {
  position: absolute;
  inset: -10%;
  border-radius: 999px;
  background:
    radial-gradient(
      circle at 50% 55%,
      transparent 46%,
      rgba(255, 255, 255, 0.16) 54%,
      rgba(255, 255, 255, 0.08) 62%,
      transparent 72%
    );
  filter: blur(0.6px);
  opacity: 0.7;
  mix-blend-mode: overlay;
  transform: rotate(-10deg);
}

.voiceOrbSheen {
  position: absolute;
  inset: -45%;
  border-radius: 999px;
  background:
    radial-gradient(circle at 28% 28%, rgba(255, 255, 255, 0.55), transparent 45%),
    conic-gradient(
      from 220deg,
      transparent,
      rgba(255, 255, 255, 0.18),
      transparent,
      rgba(255, 255, 255, 0.12),
      transparent
    );
  filter: blur(1px);
  opacity: 0.55;
  animation: voiceOrbSheen 7.2s linear infinite;
}

@keyframes voiceOrbSheen {
  to {
    transform: rotate(360deg);
  }
}

.voiceOrbStatic {
  position: absolute;
  inset: -22%;
  border-radius: 999px;
  pointer-events: none;
  mix-blend-mode: overlay;
  opacity: 0.35;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.018) 0px,
      rgba(255, 255, 255, 0.018) 1px,
      rgba(0, 0, 0, 0) 3px,
      rgba(0, 0, 0, 0) 7px
    ),
    radial-gradient(circle at 38% 36%, rgba(77, 224, 255, 0.1), transparent 52%),
    radial-gradient(circle at 72% 70%, rgba(182, 124, 255, 0.1), transparent 55%);
  filter: blur(0.35px);
  animation: voiceOrbStaticDrift 1.25s steps(2) infinite;
}

.voiceOrbStatic::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 999px;
  opacity: 0.4;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.95' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  background-size: 180px 180px;
  animation: voiceOrbGrainShift 0.85s steps(2) infinite;
}

.voiceOrbStatic::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 999px;
  opacity: 0.18;
  background:
    radial-gradient(circle at 35% 40%, rgba(77, 224, 255, 0.45), transparent 55%),
    radial-gradient(circle at 70% 65%, rgba(255, 99, 211, 0.35), transparent 58%);
  filter: blur(8px);
  mix-blend-mode: screen;
  animation: voiceOrbChroma 2.2s ease-in-out infinite;
}

@keyframes voiceOrbStaticDrift {
  0% {
    transform: translate(-1.2%, -0.8%) rotate(-1deg);
    opacity: 0.22;
  }
  50% {
    transform: translate(1%, 0.9%) rotate(1deg);
    opacity: 0.34;
  }
  100% {
    transform: translate(-0.8%, 0.4%) rotate(0deg);
    opacity: 0.26;
  }
}

@keyframes voiceOrbGrainShift {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 68px -44px;
  }
}

@keyframes voiceOrbChroma {
  0%,
  100% {
    transform: translate(-2%, 1%) scale(1.02);
  }
  50% {
    transform: translate(2%, -1%) scale(1.05);
  }
}

.voiceOrbVignette {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: radial-gradient(
    circle at 50% 55%,
    transparent 55%,
    rgba(0, 0, 0, 0.3) 78%,
    rgba(0, 0, 0, 0.55) 100%
  );
  opacity: 0.55;
  pointer-events: none;
}

.voiceOrbWrap--speaking .voiceOrbStage {
  animation: voiceOrbFloat 2.8s ease-in-out infinite;
}

.voiceOrbWrap--speaking .voiceOrbAura {
  opacity: 0.64;
  transform: scale(1.08);
}

@keyframes voiceOrbFloat {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-7px);
  }
}

@keyframes voiceOrbTalk {
  0% {
    transform: scale(1) rotate(-0.25deg);
  }
  50% {
    transform: scale(1.03) rotate(0.25deg);
  }
  100% {
    transform: scale(1) rotate(-0.25deg);
  }
}

.voiceOrbReadout {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.78);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  display: flex;
  gap: 10px;
  align-items: center;
}

.voiceOrbPill {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.06);
  backdrop-filter: blur(10px);
  font-weight: 800;
}

@media (prefers-reduced-motion: reduce) {
  .voiceOrbStage,
  .voiceOrbOrb,
  .voiceOrbCore,
  .voiceOrbSheen,
  .voiceOrbStatic,
  .voiceOrbRipple {
    animation: none !important;
  }
}
